<!DOCTYPE html>
<html lang="en">
<head>
    <title>Bttleships</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>

    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet"/>

    <link rel="stylesheet" href="https://unpkg.com/papercss@1.4.1/dist/paper.min.css"/>
    <link href="css/battleships-brehuv-main.css" rel="stylesheet"/>
    <link href="css/battleships-brehuv-star.css" rel="stylesheet"/>

</head>

<body class="main-background">
<div id="top" class="row site">
    <div class="sm-3 md-3 col">
        <div class="paper">
            <div class="demo-title">
                <div class="row flex-center">
                    <h2><span class="badge success">Comments</span></h2>
                </div>

                <div class="row">
                    <input placeholder="Your comment" class="input-size" type="text" id="commentInput"/>
                </div>

                <div class="row flex-center">
                    <button class="btn-block" id="postComment">Post</button>
                    <div class="margin"></div>
                </div>

                <div class="row flex-center">
                    <table>
                        <thead>
                        <tr>
                            <th>#</th>
                            <th>Name</th>
                            <th>Comment</th>
                        </tr>
                        </thead>
                        <tbody id="commentList"/>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <div class="sm-6 md-6 col">
        <div class="paper">
            <div class="demo-title">
                <div class="row flex-center">
                    <h2><span class="badge secondary">BattleShips</span></h2>
                    <a href="/battleships-brehuv-singleplayer-setup"
                       class="center-centred btn-block paper-btn">LetsPlay</a>
                    <div class="margin"></div>
                </div>
                <div>
                    <h2 class="center-centred"><span class="badge warning">BestScores</span></h2>
                </div>
                <div class="row flex-center">
                    <table>
                        <thead>
                        <tr>
                            <th>#</th>
                            <th>Name</th>
                            <th>Points</th>
                            <th>Played on</th>
                        </tr>
                        </thead>
                        <tbody id="scoreList"/>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <div class="sm-3 md-3 col">
        <div class="paper">
            <div class="demo-title">

                <div class="row flex-center">
                    <h2><span class="badge success">Rating</span></h2>
                </div>

                <div class="row flex-center">
                    <div class="row">
                        <fieldset class="rating">
                            <input type="radio" id="5star" name="rating" value="5"/>
                            <label class="full" for="5star" title="Excellent"></label>


                            <input type="radio" id="4star" name="rating" value="4"/>
                            <label class="full" for="4star" title="Pretty good"></label>


                            <input type="radio" id="3star" name="rating" value="3"/>
                            <label class="full" for="3star" title="Ok"></label>

                            <input type="radio" id="2star" name="rating" value="2"/>
                            <label class="full" for="2star" title="Bad"></label>


                            <input type="radio" id="1star" name="rating" value="1"/>
                            <label class="full" for="1star" title="Umm"></label>
                        </fieldset>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<script src="//code.jquery.com/jquery-3.3.1.min.js"></script>
<script src="//cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>
<!-- CommentScript -->
<script type="text/javascript">
    //<![CDATA[
    $(document).ready(function () {
        $.ajax({
            url: "/rest/comment/battleships-brehuv",
        }).done(function (json) {
            for (var i = 0; i < json.length; i++) {
                var comment = json[i];
                $("#commentList").append($("<tr><td>" + (i + 1) + "</td><td>" + comment.player + "</td><td>" + comment.comment + "</td></tr>"));
                // <td>" + comment.commentedOn + "</td>
            }
        });
    });

    $(document).ready(function () {
        $('#example').DataTable({
            columns: [
                {data: "player"},
                {data: "comment"},
                {data: "commentedOn"}
            ],
            ajax: {url: "/rest/comment/battleships-brehuv", dataSrc: ''}
        });
    });
    //]]>
</script>


<script type="text/javascript">
    document.getElementById("postComment").onclick = function () {
        var d = new Date();
        $.ajax({
            type: "POST",
            url: '/rest/comment',
            data: {
                "player": "jakubbrehuv",
                "game": "battleships-brehuv",
                "comment": "Best Game ever",
                "commentedOn": d.getTime()
            },
            success: function () {
                console.log("succesfully send");
            },
            error: function () {
                console.log("failed send");
            }
        });

    };

</script>


<!-- ScoreScript -->
<script type="text/javascript">
    //<![CDATA[
    $(document).ready(function () {
        $.ajax({
            url: "/rest/score/battleships-brehuv",
        }).done(function (json) {
            for (var i = 0; i < json.length; i++) {
                var score = json[i];
                $("#scoreList").append($("<tr><td>" + (i + 1) + "</td><td>" + score.player + "</td><td>" + score.points + "</td><td>" + milisToDate(score.playedOn) + "</td></tr>"));
            }
        });
    });

    $(document).ready(function () {
        $('#example').DataTable({
            columns: [
                {data: "player"},
                {data: "points"},
                {data: "playedOn"}
            ],
            ajax: {url: "/rest/score/battleships-brehuv", dataSrc: ''}
        });
    });

    //]]>

    function milisToDate(time) {
        var date = new Date(time);
        return date.getDay().toString() + "." + date.getMonth().toString() + "." + date.getFullYear().toString()
            + " (" + date.getHours().toString() + ":" + date.getMinutes().toString() + ")";
    }
</script>


<!-- RatingScript -->
<script type="text/javascript">
    //<![CDATA[
    $(document).ready(function () {
        $.ajax({

            //todo: get user name from login
            url: "/rest/rating/battleships-brehuv/jakubbrehuv",

        }).done(function (json) {
            var score = json;
            document.getElementById(score + "star").checked = true;
        });
    });

    //]]>

    function milisToDate(time) {
        var date = new Date(time);
        return date.getDay().toString() + "." + date.getMonth().toString() + "." + date.getFullYear().toString()
            + " (" + date.getHours().toString() + ":" + date.getMinutes().toString() + ")";
    }
</script>
</body>
</html>